## 产品目标与体验
- 面向文化类展陈的“万物皆可粒子化”，支持图像、文本、视频、3D文物的粒子重构与交互展示。
- 主打“爆火”级视觉冲击：高密度粒子、绚丽爆裂/重组、音视频驱动、沉浸式空间导览。
- 多场景复用：活动主屏、线上展厅、专题页面、教育普及、品牌故事等。

## 核心粒子特效玩法
- 粒子爆裂/回流：Logo/文物形体粒子化后爆裂、再按引力场回归重组。
- 形态变换：图像→文本→3D轮廓的粒子形变（SDF/体素采样）。
- 流场/噪声：基于 curl noise 的流动效果，支持方向、强度、涡度参数化。
- 音频反应：WebAudio FFT 驱动颜色、发射率、爆裂强度，实现“随音乐起舞”的动效。
- 交互导览：鼠标/触控吸引、驱散、划线引导、热点触发信息卡片。
- 叠加后期：Bloom、色散、景深、辉光、胶片颗粒，营造“爆火”质感。

## 技术选型（优先 WebGL，兼容 WebGPU）
- 渲染内核：Three.js（成熟生态）或 WebGPU 原生（前瞻，可做增强层）。
- 框架层：React + React Three Fiber（组件化、易管理）或 Svelte + three（轻量）。
- 着色器：GLSL 自定义顶点/片元；GPU 粒子计算用 FBO Ping-Pong（WebGL1/2通用）。
- 高性能：InstancedMesh/Points + 纹理缓冲传递位置/速度；WebGL2 可用 Transform Feedback。
- 动画/Tween：GSAP/Tween.js 或自研时间线，用于场景编排与镜头调度。
- 音频：WebAudio API（FFT），可选 `Tone.js` 辅助。
- 后期：`postprocessing` 库（Bloom/Glitch/ChromaticAberration/DepthOfField）。
- 资源管线：GLB/DRACO 压缩 3D；图片 WebP/AVIF；视频 HLS；SpriteSheet 合理切图。
- 构建：Vite + TypeScript；SSR 可选 Next.js（SEO/首屏更快）。

## 系统架构
- 前端展示层：
  - `ViewerApp`：路由/布局/状态管理（Zustand/Recoil）。
  - `ParticleEngine`：粒子核心（发射器、力场、求解器、材质）。
  - `EffectPlugin`：特效插件（爆裂、形变、流场、音频驱动、后期管线）。
  - `SceneComposer`：场景编排（时间线、镜头、事件、热区）。
- 内容管理/后台：
  - 轻量起步：JSON 配置（展品列表、素材、特效参数、时间线）。
  - 进阶：Headless CMS（Strapi/NestJS），REST/GraphQL 下发；角色/多语言/版本管理。
- 资源与发布：
  - 静态资源上云（对象存储+CDN），支持预加载与按需分发。
  - 监控埋点（Performance/TTI/FPS/崩溃率），灰度发布与兜底回退。

## 性能与兼容策略
- 目标吞吐：桌面 50–120 FPS，粒子 20万–200万（依硬件与后期强度调整）。
- 移动端：粒数动态下调（Device/Browser Profile）；关闭重后期；分辨率自适应。
- 技术兼容：
  - WebGL1 基线（Points+FBO），WebGL2 优化（Transform Feedback）。
  - WebGPU 可选增强（Compute Shader）并提供软降级到 WebGL。
- 内存与带宽：纹理集约化、实例化共用材质、LOD/裁剪、按需加载。

## 粒子化实现要点
- 几何采样：
  - 图像：按灰度/通道/边缘采样生成目标位置纹理。
  - 文本：SDF 距离场确定粒子落点与轮廓精准度。
  - 3D 模型：表面/体素采样（Poisson/均匀）生成锚点。
- GPU 求解：
  - 位置/速度纹理 Ping-Pong（dt、阻尼、力场叠加）。
  - 力场：吸引/排斥、流场噪声、目标场（跟随形体）。
- 材质表现：
  - Additive/Alpha 混合，色带/梯度、温度映射；可选软粒（软光晕）。
  - 颜色/大小/发光随音频或事件驱动。

## 交互与编排
- 交互：Raycaster 命中热点、指针力场、触控手势（滑动/捏合）。
- 编排：时间线场景（Intro→爆裂→形变→导览→回归），可参数化。
- 文案与信息：信息卡片/侧栏/弹层；多语言（i18n）；无障碍标签。

## 安全与合规
- 资源访问签名/过期、域名白名单、CORS 控制。
- 第三方素材版权管理与可追溯元数据。
- 数据隐私：仅必要埋点，遵循地域合规（如GDPR）。

## 迭代路线（里程碑）
- M0 原型（1–2周）：
  - 10–50万粒子爆裂/回流、基础流场、音频驱动、两种后期（Bloom/色散）。
  - 导入图片/Logo 粒子化，简单时间线编排，桌面/移动降级策略。
- M1 展厅化（2–4周）：
  - 场景路由、热点信息卡片、资源预加载、CMS/JSON配置切换。
  - 3D文物采样、文本SDF形变、主题皮肤；监控与异常兜底。
- M2 扩展（3–6周）：
  - WebGPU增强、视频粒子化、多人同屏（WebSocket），更丰富后期管线。

## 交付与验证
- Demo：两套主题（“爆火庆典”“文化粒海”）各含图像/文本/3D案例。
- 指标：FPS>60（桌面），首屏 <3s；移动端稳帧>30、交互响应<50ms。
- 自动化：性能采样、截图回归、端能力探测；崩溃日志与回退路径。