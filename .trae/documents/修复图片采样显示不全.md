## 原因分析
- 采样函数只保留“较亮且不透明”像素：`a > 160 && bright > 80`（src/components/ParticleScene.tsx:153-161），导致阴影/暗部被丢弃。
- 使用 `AdditiveBlending` 会让接近黑色的粒子几乎不可见（在深色背景下更明显）。
- 下采样步长 `step=2` 与固定粒子上限 30000，会降低细节（点数不足时还会重复采样）。

## 改进方案
1. 放宽/自适应阈值：
   - 将条件改为 `a > 80 && bright > dynamicThreshold`，其中 `dynamicThreshold` 取图像亮度均值的 40%-60%，适配不同图片。
   - 或简单先把 `bright` 阈值降到 `20`，保证暗部也采样。
2. 提升暗部可见性：
   - 为颜色增加最小亮度底线：`color = color*(1-minLift) + minLift`（如 0.25），避免暗部在加法混合下“看不见”。
   - 或在图片模式下改用 `NormalBlending`，保留整体更真实的明暗；默认仍可保持加法混合，但加亮暗部。
3. 自适应采样步长与点数：
   - 根据目标粒子数动态选择 `step`，让采样点 ≈ `particleCount`，提升细节且避免重复映射。
   - 可将调参面板的粒子数上限从 30000提高到 60000-100000（性能权衡）。
4. 保持跨域与拉伸逻辑不变（当前 `drawImage` 会等比拉伸，不裁剪；如需不失真可后续加信箱式填充）。

## 具体修改
- 文件：`src/components/ParticleScene.tsx`
  - 在 `setTargetsFromImage` 内：
    - 计算图像亮度均值 `avgBright`，设 `dynamicThreshold = avgBright * 0.5`。
    - 条件改为：`if (a > 80 && bright > dynamicThreshold)`。
    - 为采样颜色加入亮度抬升：`const lift=0.25; cols.push(r/255*(1-lift)+lift, ...)`。
    - 根据 `particleCount` 动态确定 `step`（例如 `step = Math.max(1, Math.floor(Math.sqrt((size*size)/particleCount)))`）。
  - 在 points 材质：图片模式可选改为 `NormalBlending` 或保留加法但启用亮度底线（首选亮度底线以兼顾风格）。
- 文件：`src/components/TunePanel.tsx`
  - 可选：将粒子数量滑条最大值提高到 60000 或 100000（若需要更多细节）。

## 验证
- 上传不同亮度/对比度的图片均能完整呈现；暗部不再“丢失”。
- 粒子细节与数量可通过滑条与自适应采样平衡性能。

如确认，我将按上述步骤实施并验证效果。