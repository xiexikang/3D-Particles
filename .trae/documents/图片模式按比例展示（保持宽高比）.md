## 原因与现状
- 现有实现在固定 512×512 画布上直接 `drawImage(bitmap, 0, 0, size, size)`（主线程与 Worker 都如此），强制把任意图片缩放成正方形，未保持原始宽高比。
- 随后基于画布像素采样为点云，所以最终形状等同于被拉伸后的图像；对于非常宽或高的图片，视觉上像是“显示不全/失真”。

## 改动目标
- 保持图片原始宽高比进行绘制，用“contain（等比缩放居中，四周留空）”策略。
- 点云采样与坐标映射逻辑保持一致；留空的 letterbox 区域透明，不会被采样。

## 具体修改
- 文件：`src/components/ParticleScene.tsx`（主线程回退路径）
  1. 在获取 `ImageBitmap` 后，计算目标绘制矩形：
     - `s = min(size/bitmap.width, size/bitmap.height)`
     - `dw = round(bitmap.width*s)`，`dh = round(bitmap.height*s)`
     - `dx = floor((size - dw)/2)`，`dy = floor((size - dh)/2)`
  2. 使用 `ctx.drawImage(bitmap, dx, dy, dw, dh)` 替代当前的拉伸绘制。
- 文件：`src/workers/imageSampler.ts`（Worker 路径）
  1. 同样计算 `dx,dy,dw,dh` 并使用等比居中绘制。

## 兼容性与影响
- 采样阈值计算已基于 `alpha>80` 的像素，letterbox（透明）不会影响平均亮度与阈值。
- 点云坐标映射仍按整幅画布归一化，因此形状将保持图片比例居中显示，无需额外坐标修正。
- 性能无明显变化；现有效果模式与后期处理保持不变。

## 验证
- 使用横图、竖图与透明 PNG 测试：图形居中、比例正确、无拉伸或裁剪感。
- 大小写例：海报 16:9、二维码 1:1、LOGO 3:2 均按比例显示。

## 预计改动范围
- 修改 2 处绘制代码：`ParticleScene.tsx` 的图片回退路径、`workers/imageSampler.ts` 的绘制逻辑；其他不变。